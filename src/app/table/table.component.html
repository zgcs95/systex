<div class="container">
  <div class="row justify-content-end">
    <!-- 新增 -->
      <div class="col-sm">
          <button class="btn btn-success" (click)="add()"><i class="fa-solid fa-plus"></i> Add more user</button>
      </div>
    <!-- 搜尋 -->
    <div class="col-auto">
      Search by name: 
      <mat-form-field>
        <input matInput (keyup)="applyFilter($event)" placeholder="Type name to search" #input>
      </mat-form-field>
    </div>
  </div>
</div>
<!-- 資料顯示 -->
<div class="container">
<table class="table table-striped" mat-table [dataSource]="dataSource" matSort>
  <!-- disableClear -->
  <ng-container matColumnDef="userName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="userName">Name</th>
      <td mat-cell *matCellDef="let row; let i = index" [class.table-active]="i%2==0">{{row.userName}}</td>
  </ng-container>

  <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="country">Country</th>
      <td mat-cell *matCellDef="let row; let i = index" [class.table-active]="i%2==0">{{row.country}}</td>
  </ng-container>
  <ng-container matColumnDef="salary">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="salary">Salary</th>
      <td mat-cell *matCellDef="let row; let i = index" [class.table-active]="i%2==0">{{row.salary}}</td>
  </ng-container>
  <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="email">Email</th>
      <td mat-cell *matCellDef="let row; let i = index" [class.table-active]="i%2==0">{{row.email}}</td>
  </ng-container>
  <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row; let i = index" colspan="5" [class.table-active]="i%2==0">
          <button class="btn btn-primary mx-4" mat-button (click)="edit(row.email)">Edit</button>
          <button class="btn btn-danger mx-4" mat-button (click)="remove(row.email)">Delete</button>      
      </td>
  </ng-container>
  
  <tr mat-header-row *matHeaderRowDef="displaySequence"></tr>
  <tr mat-row *matRowDef="let row; columns: displaySequence;"></tr>

  <!-- Footer -->
  <tr mat-footer-row *matFooterRowDef="['description', 'blank', 'total', 'blank', 'blank']"></tr>
  
  <ng-container matColumnDef="description">
      <td mat-footer-cell *matFooterCellDef="let row;" [class.total]="true" [class.table-active]="sourcenum%2==0">Total</td>
  </ng-container>
  <ng-container matColumnDef="blank">
    <td mat-footer-cell class="mat-footer-row" *matFooterCellDef="let row;" [class.table-active]="sourcenum%2==0"></td>
</ng-container>
  <ng-container matColumnDef="total">
      <td mat-footer-cell *matFooterCellDef="let row; " [class.table-active]="sourcenum%2==0">{{getTotal()}}</td>
  </ng-container>
</table>
</div>

<!-- 按鈕 -->
<div *ngIf="AddYes">
  <app-add (buttonClick)="onButtonClicked()" (newItemEvent)="addItem($event)"><h3>Add user</h3></app-add>
</div>

<div *ngIf="EditYes">
  <app-add [toedit]="this.dataSource.data[this.index]" (buttonClick)="onButtonClicked()" (newItemEvent)="addItem($event)"><h3>Edit user</h3></app-add>
</div>

<style>
  .total {
    font-weight: bold;
    text-align: left;
  }
</style>
